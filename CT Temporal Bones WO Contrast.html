<!DOCTYPE html>
<html>

<head>
    <title>base ct temporal bones</title>
</head>

<body>
    <section data-section-name="FINDINGS:">
        <header class="Level1">FINDINGS:</header>
        <p>
            <label>External Auditory Canal: </label>
            <select name="eac">
                <option name="" value="">Patent.</option>
                <option name="" value="">Opacified.</option>
            </select>
        </p>
        <p>
            <label>Tympanic Membrane: </label>
            <select name="tm">
                <option name="" value="">Intact.</option>
                <option name="" value="">Retracted.</option>
                <option name="" value="">Perforated.</option>
                <option name="" value="">Myringotomy tube in place.</option>
            </select>
        </p>

        <p>
            <label>Mastoid Air Cells: </label>
            <select name="mastoids">
                <option name="" value="">Well-formed</option>
                <option name="" value="">Underdeveloped</option>
            </select>
        </p>
        <p>
            <label>Middle Ear Cavity: </label>
            <select name="middle ear opacified?">
                <option name="" value="">No</option>
                <option name="" value="">Incomplete</option>
                <option name="" value="">Complete</option>
            </select>
        </p>
        <p>
            <label> opacification within the </label>
            <input type="text" name="middle ear" value="epitympanum, mesotympanum, or hypotympanum.">
        </p>

        <p>
            <label>Ossicles: </label>
            <input type="text" name="ossicles" value="Normal alignment. No erosions.">
        </p>
        <p>
            <label>Labyrinthine Structures: </label>
            <input type="text" name="labyrinthine"
                value="Cochlea, vestibule, and semicircular canals have normal morphology. The oval window and round window are patent. The cochlear aperture is patent. No semicircular canal dehiscence.">
        </p>
        <p>
            <label>Otic Capsule: </label>
            <select name="otic capsule">
                <option name="" value="">Normal mineralization.</option>
                <option name="" value="">Otosclerosis.</option>
            </select>
        </p>
        <p>
            <label>Vestibular Aqueduct: </label>
            <select name="vestibular aqueduct">
                <option name="" value="">Normal size.</option>
                <option name="" value="">Enlarged.</option>
            </select>
        </p>
        <p>
            <label>Facial Nerve: </label>
            <input type="text" name="facial nerve" value="The fallopian canal has normal course and appearance.">
        </p>
        <p>
            <label>Internal Auditory Canal: </label>
            <select name="iac">
                <option name="" value="">Normal size.</option>
                <option name="" value="">Enlarged.</option>
            </select>
        </p>
        <p>
            <label>Vascular: </label>
            <input type="text" name="vascular"
                value="The sigmoid plate is intact. The petrous carotid canal has a normal course.">
        </p>
    </section>
    <button onclick="Submit()">Submit</button>
    <script src='redstars.js'></script>
    <script src='redstarsset.js'></script>
    <script>

        function Submit() {
            redstars.component[1].valueString = document.getElementsByName("eac")[0].value;
            redstars.component[2].valueString = document.getElementsByName("tm")[0].value;
            redstars.component[3].valueString = document.getElementsByName("mastoids")[0].value;
            redstars.component[4].valueString = document.getElementsByName("middle ear opacified?")[0].value;
            redstars.component[5].valueString = document.getElementsByName("middle ear")[0].value;
            redstars.component[6].valueString = document.getElementsByName("ossicles")[0].value;
            redstars.component[7].valueString = document.getElementsByName("labyrinthine")[0].value;
            redstars.component[8].valueString = document.getElementsByName("otic capsule")[0].value;
            redstars.component[9].valueString = document.getElementsByName("vestibular aqueduct")[0].value;
            redstars.component[10].valueString = document.getElementsByName("facial nerve")[0].value;
            redstars.component[11].valueString = document.getElementsByName("iac")[0].value;
            redstars.component[12].valueString = document.getElementsByName("vascular")[0].value;
            alert("Posting!");
            postData(redstars, "Observation")
        }
        function postData(jsonString, type) {
            alert("Posting!");
            var xhttp = new XMLHttpRequest();
            var url = fhirUrl + "/" + type;
            xhttp.open("POST", url, false);
            xhttp.setRequestHeader("Content-type", 'application/json+fhir');
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4) // && this.status == 201) 
                {
                    ret = JSON.parse(this.responseText);
                    alert(this.responseText);
                }
            };
            var data = JSON.stringify(jsonString);
            xhttp.send(data);
        }

    </script>
</body>

</html>